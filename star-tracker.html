<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Star Tracker">
  <title>Kids Star Tracker</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Nunito', sans-serif;
      overflow-x: hidden;
    }
    
    .star-pop {
      animation: starPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    @keyframes starPop {
      0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
      }
      50% {
        transform: scale(1.3) rotate(180deg);
      }
      100% {
        transform: scale(1) rotate(360deg);
        opacity: 1;
      }
    }
    
    .sparkle {
      animation: sparkle 1.5s ease-in-out infinite;
    }
    
    @keyframes sparkle {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.5;
        transform: scale(0.8);
      }
    }
    
    .slide-up {
      animation: slideUp 0.3s ease-out;
    }
    
    @keyframes slideUp {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: #ffd700;
      animation: confettiFall 3s ease-out forwards;
      pointer-events: none;
      z-index: 1000;
    }
    
    @keyframes confettiFall {
      to {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    
    .kid-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }
    
    .kid-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    
    .calendar-day {
      transition: all 0.2s ease;
    }
    
    .calendar-day:hover {
      transform: scale(1.1);
      z-index: 10;
    }
    
    .category-chip {
      transition: all 0.2s ease;
    }
    
    .category-chip:hover {
      transform: scale(1.05);
    }
    
    .category-chip:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script>
    // ‚ö†Ô∏è PASTE YOUR FIREBASE CONFIG HERE
    const firebaseConfig = {
        apiKey: "AIzaSyDLxCEmP3RchhEwjRULu0ELMg_iLItBfkw",
  authDomain: "class-tracker-7ec05.firebaseapp.com",
  databaseURL: "https://class-tracker-7ec05-default-rtdb.firebaseio.com",
  projectId: "class-tracker-7ec05",
  storageBucket: "class-tracker-7ec05.firebasestorage.app",
  messagingSenderId: "34124797425",
  appId: "1:34124797425:web:9d92e45482eb27cff6e050"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const database = firebase.database();
  </script>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // Default categories
    const DEFAULT_CATEGORIES = [
      { id: 'homework', name: 'Homework', color: '#FF6B9D', emoji: 'üìö' },
      { id: 'chores', name: 'Chores', color: '#4ECDC4', emoji: 'üßπ' },
      { id: 'kindness', name: 'Kindness', color: '#FFE66D', emoji: 'üíù' },
      { id: 'reading', name: 'Reading', color: '#A8DADC', emoji: 'üìñ' },
      { id: 'behavior', name: 'Good Behavior', color: '#F4A261', emoji: 'üòä' }
    ];

    // Icon Components
    const Star = ({ className, filled = false }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className={className} fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2">
        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
      </svg>
    );

    const Plus = ({ className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
      </svg>
    );

    const X = ({ className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    );

    const Trash = ({ className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
      </svg>
    );

    const ChevronLeft = ({ className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" className={className}>
        <polyline points="15 18 9 12 15 6"/>
      </svg>
    );

    const ChevronRight = ({ className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" className={className}>
        <polyline points="9 18 15 12 9 6"/>
      </svg>
    );

    // Confetti effect
    function createConfetti() {
      const colors = ['#FFD700', '#FF6B9D', '#4ECDC4', '#FFE66D', '#F4A261', '#A8DADC'];
      for (let i = 0; i < 30; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.animationDelay = Math.random() * 0.5 + 's';
          confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 3000);
        }, i * 50);
      }
    }

    function LoginScreen() {
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');
      const [error, setError] = useState('');
      const [loading, setLoading] = useState(false);

      const handleLogin = async (e) => {
        e.preventDefault();
        setError('');
        setLoading(true);

        try {
          await firebase.auth().signInWithEmailAndPassword(email, password);
        } catch (error) {
          setError(error.message);
        } finally {
          setLoading(false);
        }
      };

      return (
        <div className="min-h-screen flex items-center justify-center p-4" style={{
          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
        }}>
          <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full">
            <div className="text-center mb-8">
              <div className="text-6xl mb-4">‚≠ê</div>
              <h1 className="text-4xl font-bold mb-2" style={{ fontFamily: "'Fredoka', sans-serif", color: '#667eea' }}>
                Star Tracker
              </h1>
              <p className="text-gray-600 text-lg">Track your kids' achievements!</p>
            </div>

            <form onSubmit={handleLogin} className="space-y-4">
              <div>
                <input
                  type="email"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  className="w-full px-4 py-3 border-2 border-gray-200 rounded-2xl focus:border-purple-500 focus:outline-none text-lg"
                  placeholder="Email"
                  required
                />
              </div>

              <div>
                <input
                  type="password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  className="w-full px-4 py-3 border-2 border-gray-200 rounded-2xl focus:border-purple-500 focus:outline-none text-lg"
                  placeholder="Password"
                  required
                />
              </div>

              {error && (
                <div className="bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-2xl text-sm">
                  {error}
                </div>
              )}

              <button
                type="submit"
                disabled={loading}
                className="w-full py-3 rounded-2xl font-bold text-white text-lg transition-all disabled:opacity-50"
                style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}
              >
                {loading ? 'Signing in...' : 'Sign In'}
              </button>
            </form>
          </div>
        </div>
      );
    }

    function StarTracker({ user, onLogout }) {
      const [kids, setKids] = useState([
        { id: 'kid1', name: 'Kid 1', color: '#FF6B9D', avatar: 'üëß' },
        { id: 'kid2', name: 'Kid 2', color: '#4ECDC4', avatar: 'üë¶' }
      ]);
      const [selectedKid, setSelectedKid] = useState(null);
      const [stars, setStars] = useState({}); // { kid1: { '2026-02-15': { homework: true, chores: true } } }
      const [currentMonth, setCurrentMonth] = useState(new Date());
      const [selectedDate, setSelectedDate] = useState(null);
      const [showCategoryModal, setShowCategoryModal] = useState(false);
      const [categories, setCategories] = useState(DEFAULT_CATEGORIES);
      const [newCategoryName, setNewCategoryName] = useState('');
      const [isLoading, setIsLoading] = useState(true);

      const dataRef = firebase.database().ref(`users/${user.uid}/starTracker`);

      useEffect(() => {
        const listener = dataRef.on('value', (snapshot) => {
          const data = snapshot.val();
          if (data) {
            if (data.kids) setKids(data.kids);
            if (data.stars) setStars(data.stars);
            if (data.categories) setCategories(data.categories);
          }
          setIsLoading(false);
        }, (error) => {
          console.error('Firebase read error:', error);
          setIsLoading(false);
        });

        return () => dataRef.off('value', listener);
      }, []);

      useEffect(() => {
        if (!isLoading) {
          saveToFirebase();
        }
      }, [kids, stars, categories]);

      const saveToFirebase = async () => {
        try {
          await dataRef.set({
            kids,
            stars,
            categories,
            lastModified: new Date().toISOString()
          });
        } catch (error) {
          console.error('Error saving:', error);
        }
      };

      const toggleStar = (kidId, date, categoryId) => {
        const newStars = { ...stars };
        if (!newStars[kidId]) newStars[kidId] = {};
        if (!newStars[kidId][date]) newStars[kidId][date] = {};
        
        const currentValue = newStars[kidId][date][categoryId];
        newStars[kidId][date][categoryId] = !currentValue;
        
        if (!currentValue) {
          createConfetti();
        }
        
        setStars(newStars);
      };

      const addCustomCategory = () => {
        if (!newCategoryName.trim()) return;
        
        const colors = ['#FF6B9D', '#4ECDC4', '#FFE66D', '#A8DADC', '#F4A261', '#95E1D3'];
        const emojis = ['üé®', '‚öΩ', 'üéµ', 'üéØ', 'üèÜ', 'üåü', 'üí™', 'üéâ'];
        
        const newCategory = {
          id: `custom_${Date.now()}`,
          name: newCategoryName,
          color: colors[Math.floor(Math.random() * colors.length)],
          emoji: emojis[Math.floor(Math.random() * emojis.length)]
        };
        
        setCategories([...categories, newCategory]);
        setNewCategoryName('');
      };

      const deleteCategory = (categoryId) => {
        if (DEFAULT_CATEGORIES.some(c => c.id === categoryId)) {
          alert("Can't delete default categories!");
          return;
        }
        setCategories(categories.filter(c => c.id !== categoryId));
      };

      const getStarsForKid = (kidId) => {
        if (!stars[kidId]) return { total: 0, today: 0, thisWeek: 0 };
        
        const today = new Date().toISOString().split('T')[0];
        const startOfWeek = new Date();
        startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay());
        const weekStart = startOfWeek.toISOString().split('T')[0];
        
        let total = 0;
        let todayCount = 0;
        let thisWeekCount = 0;
        
        Object.entries(stars[kidId]).forEach(([date, cats]) => {
          const count = Object.values(cats).filter(Boolean).length;
          total += count;
          if (date === today) todayCount += count;
          if (date >= weekStart) thisWeekCount += count;
        });
        
        return { total, today: todayCount, thisWeek: thisWeekCount };
      };

      const getDaysInMonth = (date) => {
        const year = date.getFullYear();
        const month = date.getMonth();
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const daysInMonth = lastDay.getDate();
        const startingDayOfWeek = firstDay.getDay();
        return { daysInMonth, startingDayOfWeek, year, month };
      };

      const { daysInMonth, startingDayOfWeek, year, month } = getDaysInMonth(currentMonth);
      const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

      const getStarsForDate = (kidId, date) => {
        if (!stars[kidId] || !stars[kidId][date]) return 0;
        return Object.values(stars[kidId][date]).filter(Boolean).length;
      };

      if (isLoading) {
        return (
          <div className="min-h-screen flex items-center justify-center" style={{
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
          }}>
            <div className="text-white text-2xl font-bold">Loading...</div>
          </div>
        );
      }

      if (!selectedKid) {
        return (
          <div className="min-h-screen p-6" style={{
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
          }}>
            <div className="max-w-4xl mx-auto">
              <div className="text-center mb-12">
                <h1 className="text-6xl font-bold text-white mb-4" style={{ fontFamily: "'Fredoka', sans-serif" }}>
                  ‚≠ê Star Tracker
                </h1>
                <p className="text-white text-xl opacity-90">Choose a kid to track stars</p>
              </div>

              <div className="grid md:grid-cols-2 gap-8">
                {kids.map(kid => {
                  const stats = getStarsForKid(kid.id);
                  return (
                    <div
                      key={kid.id}
                      onClick={() => setSelectedKid(kid)}
                      className="kid-card bg-white rounded-3xl p-8 shadow-2xl"
                    >
                      <div className="text-center">
                        <div className="text-8xl mb-4">{kid.avatar}</div>
                        <h2 className="text-4xl font-bold mb-6" style={{ 
                          fontFamily: "'Fredoka', sans-serif",
                          color: kid.color 
                        }}>
                          {kid.name}
                        </h2>
                        
                        <div className="space-y-4">
                          <div className="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl p-4">
                            <div className="text-gray-600 text-sm font-semibold mb-1">Total Stars</div>
                            <div className="text-4xl font-bold flex items-center justify-center gap-2" style={{ color: kid.color }}>
                              <Star className="w-10 h-10" filled />
                              {stats.total}
                            </div>
                          </div>
                          
                          <div className="grid grid-cols-2 gap-4">
                            <div className="bg-blue-50 rounded-2xl p-4">
                              <div className="text-gray-600 text-xs font-semibold mb-1">Today</div>
                              <div className="text-2xl font-bold text-blue-600">{stats.today}</div>
                            </div>
                            <div className="bg-purple-50 rounded-2xl p-4">
                              <div className="text-gray-600 text-xs font-semibold mb-1">This Week</div>
                              <div className="text-2xl font-bold text-purple-600">{stats.thisWeek}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen p-4 md:p-6" style={{
          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
        }}>
          <div className="max-w-6xl mx-auto">
            {/* Header */}
            <div className="bg-white rounded-3xl shadow-2xl p-6 mb-6">
              <div className="flex items-center justify-between mb-6">
                <button
                  onClick={() => setSelectedKid(null)}
                  className="text-gray-600 hover:text-gray-800 font-semibold flex items-center gap-2"
                >
                  <ChevronLeft className="w-6 h-6" />
                  Back
                </button>
                
                <div className="text-center flex-1">
                  <div className="text-5xl mb-2">{selectedKid.avatar}</div>
                  <h2 className="text-3xl font-bold" style={{ 
                    fontFamily: "'Fredoka', sans-serif",
                    color: selectedKid.color 
                  }}>
                    {selectedKid.name}
                  </h2>
                </div>
                
                <div className="w-20"></div>
              </div>

              {/* Stats */}
              <div className="grid grid-cols-3 gap-4">
                {(() => {
                  const stats = getStarsForKid(selectedKid.id);
                  return (
                    <>
                      <div className="bg-gradient-to-br from-yellow-100 to-orange-100 rounded-2xl p-4 text-center">
                        <div className="text-sm font-semibold text-gray-700 mb-1">Total</div>
                        <div className="text-4xl font-bold flex items-center justify-center gap-1" style={{ color: selectedKid.color }}>
                          <Star className="w-8 h-8" filled />
                          {stats.total}
                        </div>
                      </div>
                      <div className="bg-blue-100 rounded-2xl p-4 text-center">
                        <div className="text-sm font-semibold text-gray-700 mb-1">Today</div>
                        <div className="text-4xl font-bold text-blue-600">{stats.today}</div>
                      </div>
                      <div className="bg-purple-100 rounded-2xl p-4 text-center">
                        <div className="text-sm font-semibold text-gray-700 mb-1">This Week</div>
                        <div className="text-4xl font-bold text-purple-600">{stats.thisWeek}</div>
                      </div>
                    </>
                  );
                })()}
              </div>
            </div>

            {/* Calendar */}
            <div className="bg-white rounded-3xl shadow-2xl p-6">
              <div className="flex items-center justify-between mb-6">
                <button
                  onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1))}
                  className="p-3 rounded-2xl hover:bg-gray-100 transition-colors"
                >
                  <ChevronLeft className="w-6 h-6" style={{ color: selectedKid.color }} />
                </button>
                
                <h3 className="text-2xl font-bold" style={{ 
                  fontFamily: "'Fredoka', sans-serif",
                  color: selectedKid.color 
                }}>
                  {monthNames[month]} {year}
                </h3>
                
                <button
                  onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1))}
                  className="p-3 rounded-2xl hover:bg-gray-100 transition-colors"
                >
                  <ChevronRight className="w-6 h-6" style={{ color: selectedKid.color }} />
                </button>
              </div>

              <div className="grid grid-cols-7 gap-2">
                {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
                  <div key={day} className="text-center font-bold text-gray-600 text-sm py-2">
                    {day}
                  </div>
                ))}

                {[...Array(startingDayOfWeek)].map((_, i) => (
                  <div key={`empty-${i}`} />
                ))}

                {[...Array(daysInMonth)].map((_, i) => {
                  const day = i + 1;
                  const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                  const starCount = getStarsForDate(selectedKid.id, dateStr);
                  const isToday = new Date().toDateString() === new Date(year, month, day).toDateString();

                  return (
                    <button
                      key={day}
                      onClick={() => {
                        setSelectedDate(dateStr);
                        setShowCategoryModal(true);
                      }}
                      className="calendar-day aspect-square rounded-2xl flex flex-col items-center justify-center font-bold text-lg relative"
                      style={{
                        background: starCount > 0 
                          ? `linear-gradient(135deg, ${selectedKid.color}20, ${selectedKid.color}40)`
                          : '#f8f9fa',
                        border: isToday ? `3px solid ${selectedKid.color}` : 'none'
                      }}
                    >
                      <span className="text-gray-800">{day}</span>
                      {starCount > 0 && (
                        <div className="flex items-center gap-1 mt-1">
                          <Star className="w-4 h-4 sparkle" style={{ color: selectedKid.color }} filled />
                          <span className="text-xs font-bold" style={{ color: selectedKid.color }}>
                            {starCount}
                          </span>
                        </div>
                      )}
                    </button>
                  );
                })}
              </div>
            </div>
          </div>

          {/* Category Modal */}
          {showCategoryModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-3xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto slide-up">
                <div className="flex items-center justify-between mb-6">
                  <h3 className="text-2xl font-bold" style={{ 
                    fontFamily: "'Fredoka', sans-serif",
                    color: selectedKid.color 
                  }}>
                    {selectedDate}
                  </h3>
                  <button
                    onClick={() => setShowCategoryModal(false)}
                    className="p-2 hover:bg-gray-100 rounded-xl transition-colors"
                  >
                    <X className="w-6 h-6 text-gray-600" />
                  </button>
                </div>

                <div className="grid grid-cols-2 gap-4 mb-6">
                  {categories.map(category => {
                    const earned = stars[selectedKid.id]?.[selectedDate]?.[category.id];
                    
                    return (
                      <button
                        key={category.id}
                        onClick={() => toggleStar(selectedKid.id, selectedDate, category.id)}
                        className="category-chip relative p-6 rounded-2xl text-left font-semibold text-lg shadow-lg"
                        style={{
                          background: earned 
                            ? `linear-gradient(135deg, ${category.color}, ${category.color}dd)`
                            : '#f8f9fa',
                          color: earned ? 'white' : '#333'
                        }}
                      >
                        <div className="flex items-center justify-between">
                          <div>
                            <div className="text-3xl mb-2">{category.emoji}</div>
                            <div>{category.name}</div>
                          </div>
                          {earned && (
                            <Star className="w-10 h-10 text-white star-pop" filled />
                          )}
                        </div>
                        
                        {!DEFAULT_CATEGORIES.some(c => c.id === category.id) && (
                          <button
                            onClick={(e) => {
                              e.stopPropagation();
                              deleteCategory(category.id);
                            }}
                            className="absolute top-2 right-2 p-2 bg-red-500 rounded-xl hover:bg-red-600 transition-colors"
                          >
                            <Trash className="w-4 h-4 text-white" />
                          </button>
                        )}
                      </button>
                    );
                  })}
                </div>

                {/* Add Custom Category */}
                <div className="border-t-2 border-gray-200 pt-6">
                  <h4 className="font-bold text-lg mb-4 text-gray-700">Add Custom Category</h4>
                  <div className="flex gap-3">
                    <input
                      type="text"
                      value={newCategoryName}
                      onChange={(e) => setNewCategoryName(e.target.value)}
                      placeholder="Category name..."
                      className="flex-1 px-4 py-3 border-2 border-gray-200 rounded-2xl focus:border-purple-500 focus:outline-none"
                      onKeyPress={(e) => e.key === 'Enter' && addCustomCategory()}
                    />
                    <button
                      onClick={addCustomCategory}
                      className="px-6 py-3 rounded-2xl text-white font-semibold flex items-center gap-2 transition-all hover:scale-105"
                      style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}
                    >
                      <Plus className="w-5 h-5" />
                      Add
                    </button>
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    function App() {
      const [user, setUser] = useState(null);
      const [loading, setLoading] = useState(true);

      useEffect(() => {
        const unsubscribe = firebase.auth().onAuthStateChanged((user) => {
          setUser(user);
          setLoading(false);
        });
        return unsubscribe;
      }, []);

      if (loading) {
        return (
          <div className="min-h-screen flex items-center justify-center" style={{
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
          }}>
            <div className="text-white text-2xl font-bold">Loading...</div>
          </div>
        );
      }

      return user ? <StarTracker user={user} /> : <LoginScreen />;
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
